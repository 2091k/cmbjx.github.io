---
layout: post
title: "Serverless Cloud Notepad äº‘ç¬”è®°ï¼ˆæ— æœåŠ¡ç‰ˆï¼‰"
subtitle: ""
author: "cmbjx"
header-img: "img/bg-little-universe.jpg"
header-mask: 0.4
tags:
  - Notepad
  - äº‘ç¬”è®°
---


## âœ¨ åŠŸèƒ½

- âœ æ— éœ€ç™»å½•/æ³¨å†Œ, å³åˆ»å¼€å§‹ä¹¦å†™
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜
- âŒ æ— éœ€æœåŠ¡ç«¯æˆ–æ•°æ®åº“
- âš¡ é«˜å¯ç”¨æ€§ã€é«˜æ€§èƒ½ï¼ˆåªè¦CFä¸å€’é—­ğŸ¤£ï¼‰
- ğŸ“¦ è½»æ¾éƒ¨ç½²ç§æœ‰åŒ–ç‰ˆæœ¬ï¼ˆå¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼‰
- ğŸŒ æ”¯æŒä¸­æ–‡pathname

## ğŸ”¨ ä½¿ç”¨

- ç›´æ¥è®¿é—® `/` ä¼šæ–°å»ºä¸€ç¯‡éšæœºåå­—çš„ç¬”è®°

- è®¿é—® `/éšä¾¿ä»€ä¹ˆ` æŸ¥çœ‹/ç¼–è¾‘æŒ‡å®šåç§°çš„ç¬”è®°

ç°åœ¨å°±è¯•è¯•ï¼ [notepad.2091k.cn](https://notepad.2091k.cn)

## ğŸ’» å…¼å®¹æ€§

- ä»»ä½•ç°ä»£æµè§ˆå™¨ (ç§»åŠ¨ç«¯å¯ç”¨)

## ğŸ“¦ ç§æœ‰åŒ–éƒ¨ç½²

- ç”³è¯·åˆ›å»ºä½ è‡ªå·±çš„Workå’ŒKVï¼ˆå…è´¹ç‰ˆå°±å¥½~~ä¸€èµ·ç™½å«–åˆ°CFå€’é—­~~ï¼‰ [workers.cloudflare.com](https://workers.cloudflare.com/).
- ä¸‹è½½ä»“åº“ä»£ç ï¼Œç¼–è¾‘ `wrangler.toml`:
```sh
kv_namespaces = [
  { binding = "NOTES", id = "<è¿™é‡Œå¡«ä½ è‡ªå·±çš„ç¬¬1ä¸ªKV id>" },
  { binding = "SHARE", id = "<è¿™é‡Œå¡«ä½ è‡ªå·±çš„ç¬¬2ä¸ªKV id>" }
]
```
- æ‰§è¡Œå‘½ä»¤æ¨é€ä»£ç åˆ° Cloudflare
```sh
$ npm i
$ npm run publish
```
- ç»™ä½ çš„åŸŸåæ·»åŠ ä¸€æ¡CNAMEè§£æè®°å½•ï¼ŒæŒ‡å‘ä½ åˆšåˆšåˆ›å»ºçš„Workåœ°å€ï¼ˆå¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåçš„è¯ï¼‰



## å®Œæ•´æ•™ç¨‹

- å®‰è£…node.js,å®‰è£…Wrangler;
  
- nodejsä¸‹è½½åœ°å€https://nodejs.org/en/download

- åœ¨cloudflareè´¦å·é‡Œï¼ŒWorkersä¸‹é¢KVé‡Œåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œåç§°ä¸ºï¼ˆå¤§å†™ï¼‰NOTESï¼Œç„¶åå¤åˆ¶åé¢çš„IDå¤‡ç”¨ï¼›

- å®‰è£…å¥½nodejsåï¼ŒWindowsé‡ŒCtrl+é¼ æ ‡å³é”®ï¼Œè°ƒå‡ºå‘½ä»¤çª—å£
```sh
npm version
```
![è¯·è¾“å…¥å›¾ç‰‡æè¿°][1]

- ç„¶åå®‰è£… Wrangle
```sh
npm install -g wrangle
```
## ä¸‹è½½é¡¹ç›®åˆ°ç”µè„‘è§£å‹ï¼Œè¿›å…¥ç›®å½•cloud-notepadä¸Šä¼ é¡¹ç›®åˆ°cf

- é¡¹ç›®åœ°å€[https://github.com/2091k/cloud-notepad](https://github.com/2091k/cloud-notepad)

- æ‰“å¼€å‘½ä»¤çª—å£ è¾“å…¥

- æµè§ˆå™¨å¼¹å‡ºç™»å½•ï¼Œç™»å½•åå°±å¯ä»¥

```sh
wrangler login
npm -i
npm run publish
```
- å¦‚æœä¸Šé¢çš„å‘½ä»¤ä¸Šä¼ å¤±è´¥ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯

```sh
wrangler publish
```

- å¦‚æœæœ‰æŠ¥é”™ å…ˆè¿è¡Œ

```sh
npm install

æ–°çš„ä¸Šä¼ å‘½ä»¤

wrangler deploy
```

- ç„¶åå†CFé‡Œå°±èƒ½çœ‹åˆ°æ–°çš„Workersé¡¹ç›®äº†ï¼Œå¯ä»¥æ·»åŠ è‡ªå·±çš„åŸŸå

  [1]: https://tgimg.2091k.cn/file/eba133810db421accdfa0.png
